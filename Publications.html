<!DOCTYPE html>
<!-- Template by Quackit.com -->
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->

    <title>Koki Satsukawa - Publications</title>

    <!-- Bootstrap Core CSS -->
    <link href="css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom CSS: You can use this stylesheet to override any Bootstrap styles and/or apply your own styles -->
    <link href="css/custom.css" rel="stylesheet">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
</head>

<body>

    <!-- Navigation -->
    <nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
        <div class="container">
            <!-- Logo and responsive toggle -->
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="index.html">
                	K. Satsukawa
                </a>
            </div>
            <!-- Navbar links -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a href="index.html">Home</a>
                    </li>
                    <li>
                        <a href="CV.html">CV</a>
                    </li>
                    <li class="active">
                        <a href="Publications.html">Publications</a>
                    </li>
                    <li>
                        <a href="Contact.html">Contact</a>
                    </li>
                </ul>
            </div>
            <!-- /.navbar-collapse -->
        </div>
        <!-- /.container -->
    </nav>

    <!-- Content -->
    <div class="container">

        <!-- Heading -->
        <div class="row">
            <div class="col-lg-12">
                <h1 class="page-header">Publications
                </h1>
            </div>
        </div>
        <section>
            <p>
                <span class="detail-text">For the complete list of publications, see <a id="complete-pdf-link" href="images/List.pdf">[PDF]</a>.</span>
            </p>
        </section>

        <section id="publications-container" aria-live="polite">
            <p class="detail-text">Loading publications…</p>
        </section>
        <noscript>
            <p class="detail-text">Please enable JavaScript to view the publications list.</p>
        </noscript>
    </div>
    <!-- /.container -->

	<footer>
        <div class="copyright">
        	<div class="container">
        		<p>&copy; 2021–2026 Koki Satsukawa</p>
        	</div>
        </div>
	</footer>


    <!-- jQuery -->
    <script src="js/jquery-1.11.3.min.js"></script>

    <!-- Bootstrap Core JavaScript -->
    <script src="js/bootstrap.min.js"></script>

    <script>
        (function () {
            const container = document.getElementById("publications-container");
            const pdfLink = document.getElementById("complete-pdf-link");

            function escapeHtml(text) {
                const div = document.createElement("div");
                div.textContent = text;
                return div.innerHTML;
            }

            function renderVenue(item) {
                if (!item.venue) {
                    return "";
                }
                const venueText = item.venue;
                if (item.venue_link) {
                    const parts = venueText.split(",");
                    const venueName = escapeHtml(parts[0].trim());
                    const rest = parts.length > 1 ? `, ${escapeHtml(parts.slice(1).join(",").trim())}` : "";
                    return `<a href="${item.venue_link}" target="_blank" rel="noopener noreferrer">${venueName}</a>${rest}`;
                }
                return escapeHtml(venueText);
            }

            function renderTitle(item) {
                const title = escapeHtml(item.title);
                const href = item.link || item.doi;
                if (href) {
                    return `<a href="${href}" target="_blank" rel="noopener noreferrer">${title}</a>`;
                }
                return title;
            }

            function renderItem(item) {
                const year = item.year ? ` (${item.year})` : "";
                return `
                    <li class="publication-item">
                        <div class="publication-title">${renderTitle(item)}</div>
                        <div class="publication-authors">${escapeHtml(item.authors)}</div>
                        <div class="publication-venue">${renderVenue(item)}${year}</div>
                    </li>
                `;
            }

            function renderSection(section, items) {
                const sortedItems = items.slice().sort((a, b) => {
                    if (!a.year && !b.year) return 0;
                    if (!a.year) return 1;
                    if (!b.year) return -1;
                    return Number(b.year) - Number(a.year);
                });
                const cards = sortedItems.map(renderItem).join("");
                return `
                    <div class="publication-section">
                        <h3 class="section-title">${escapeHtml(section.label)}</h3>
                        <ol class="publication-list" reversed>
                            ${cards}
                        </ol>
                    </div>
                `;
            }

            async function loadPublications() {
                try {
                    const response = await fetch("output/cv.json", { cache: "no-store" });
                    if (!response.ok) {
                        throw new Error(`Failed to load cv.json: ${response.status}`);
                    }
                    const data = await response.json();

                    if (data.meta && data.meta.complete_pdf_url) {
                        pdfLink.href = data.meta.complete_pdf_url;
                    }

                    const display = (data.web && data.web.display_subtypes) || [];
                    const publications = data.publications || [];

                    const sections = display
                        .map((section) => {
                            const items = publications.filter(
                                (item) => item.subtype === section.id
                            );
                            if (!items.length) {
                                return "";
                            }
                            return renderSection(section, items);
                        })
                        .filter(Boolean)
                        .join("");

                    container.innerHTML = sections || "<p class=\"detail-text\">No publications found.</p>";
                } catch (error) {
                    container.innerHTML = `
                        <p class="detail-text">
                            Failed to load publications. If you are viewing this file locally, please use a local server (e.g. VS Code Live Server).
                        </p>
                    `;
                    console.error(error);
                }
            }

            loadPublications();
        })();
    </script>

</body>

</html>
